# 📦 ระบบพนักงาน MAC - Employee Management System

## 🎯 ระบบนี้ทำอะไร?
ระบบสำหรับพนักงาน MAC ใช้ตรวจสอบสินค้าในแต่ละสาขา โดยมีฟังก์ชัน:
- **เข้าสู่ระบบ** ด้วยรหัสพนักงาน
- **เลือกสาขา** ที่ต้องการตรวจสอบ (6 สาขา)
- **เช็คลิสต์สินค้า** บันทึกว่าสินค้ามีหรือหมด
- **ดูสถิติ** และประวัติการทำงาน

## ✨ ฟีเจอร์หลัก
| ฟีเจอร์ | คำอธิบาย |
|---------|----------|
| 🔐 **ล็อกอินปลอดภัย** | รหัสผ่านเข้ารหัส ป้องกัน SQL Injection |
| 🏢 **6 สาขา** | เมืองสมุทรปราการ, พระประแดง, พระสมุทรเจดีย์, บางพลี, บางบ่อ, บางเสาธง |
| ✅ **เช็คลิสต์** | บันทึกสถานะสินค้า (มี STOCK / หมด / ไม่มีขาย) |
| 📊 **สถิติ Real-time** | ดูจำนวนสินค้าที่ตรวจแล้ว/รอตรวจ |
| 🧹 **เคลียร์ข้อมูล** | ลบข้อมูลที่บันทึกล่าสุดได้ |
| 📱 **Responsive** | ใช้งานได้ทั้งคอมพิวเตอร์และมือถือ |

## โครงสร้างไฟล์
```
employee_app_fixed/
├── assets/                    # ไฟล์ CSS และ JavaScript
│   ├── index.css
│   ├── login.css
│   ├── login.js
│   └── nav.css
├── exports/                   # ไฟล์ SQL Export
├── history/                   # หน้าประวัติการทำงาน
│   └── history.php
├── image/                     # รูปภาพโลโก้
│   └── MAC.png
├── includes/                  # Template ส่วนกลาง
│   ├── header.php
│   └── footer.php
├── location/                  # จัดการสถานที่
│   ├── location.php
│   ├── assets/
│   │   └── location.css
│   └── checklist/             # ระบบเช็คลิสต์
│       ├── checklist.php
│       ├── checklist.css
│       ├── save.php
│       ├── clear_latest.php
│       ├── clear_data.php
│       ├── summary.php
│       └── add.php
├── logs/                      # Log files
├── sql/                       # ไฟล์ฐานข้อมูล
│   ├── db_employee.sql
│   └── samutprakan_checklist.sql
├── uploads/                   # ไฟล์อัปโหลด
│   └── photos/
├── config.php                 # การตั้งค่าฐานข้อมูล
├── index.php                  # หน้าหลัก
├── login.php                  # หน้าเข้าสู่ระบบ
├── login_db.php              # ประมวลผลการเข้าสู่ระบบ
├── logout.php                # ออกจากระบบ
├── nav.php                   # เมนูนำทาง
└── README.md                 # คู่มือการใช้งาน
```

## 📖 คู่มือการใช้งานแต่ละส่วน

### 🔑 ส่วนที่ 1: ระบบเข้าสู่ระบบ

| ไฟล์ | ทำอะไร | วิธีใช้ |
|------|--------|---------|
| **login.php** | หน้าล็อกอิน | กรอกรหัสพนักงาน + รหัสผ่าน |
| **login_db.php** | ตรวจสอบข้อมูล | ทำงานอัตโนมัติเมื่อกดล็อกอิน |
| **logout.php** | ออกจากระบบ | คลิกปุ่ม "ออกจากระบบ" |

**💡 หมายเหตุ:** 
- ถ้าล็อกอินผิด 3 ครั้ง จะต้องรอ 5 นาที
- รหัสผ่านเข้ารหัสด้วย bcrypt เพื่อความปลอดภัย

---

### 🏠 ส่วนที่ 2: หน้าหลัก (Dashboard)

**ไฟล์:** `index.php`

**แสดงอะไร:**
- 👋 ข้อความต้อนรับพร้อมชื่อพนักงาน
- 📊 สถิติแบบ Real-time:
  - งานที่เสร็จสิ้น
  - งานที่รอทำ
  - จำนวนสาขาทั้งหมด
  - ชั่วโมงการทำงาน
- 🎯 เมนูหลัก 3 เมนู:
  - **สถานที่ทำงาน** → ไปเลือกสาขา
  - **ประวัติการทำงาน** → ดูประวัติที่ผ่านมา
  - **รายงานและสถิติ** → ดูสรุปรายงาน

---

### 📍 ส่วนที่ 3: เลือกสถานที่ (6 สาขา)

**ไฟล์:** `location/location.php`

**ทำอะไร:**
1. แสดงการ์ด 6 สาขา:
   - เมืองสมุทรปราการ
   - พระประแดง
   - พระสมุทรเจดีย์
   - บางพลี
   - บางบ่อ
   - บางเสาธง
2. แสดงจำนวนสินค้าที่ต้องตรวจ
3. คลิก "เข้าสู่เช็คลิสต์" → ไปหน้าตรวจสอบสินค้า

**ตัวอย่างการใช้:**
```
เมืองสมุทรปราการ
├─ รายการสินค้า: 150
├─ ตรวจแล้ว: 120
└─ รอตรวจ: 30
```

---

### ✅ ส่วนที่ 4: เช็คลิสต์สินค้า (สำคัญที่สุด!)

**ไฟล์:** `location/checklist/checklist.php`

**วิธีใช้ทีละขั้นตอน:**

#### ขั้นตอนที่ 1: เลือกสถานะสินค้า
แต่ละสินค้าให้เลือก 1 จาก 3 สถานะ:
- 🟢 **มี STOCK** = สินค้ามีในร้าน
- 🔴 **สินค้าหมด** = สินค้าหมด ต้องสั่งเพิ่ม
- ⚫ **ไม่มีขาย** = ร้านนี้ไม่ขายสินค้านี้

#### ขั้นตอนที่ 2: ใส่หมายเหตุ (บังคับ!)
- ต้องใส่หมายเหตุทุกรายการ
- ตัวอย่าง: "มีครบ", "หมดเมื่อวาน", "ไม่มีขายสาขานี้"

#### ขั้นตอนที่ 3: บันทึกข้อมูล
- กดปุ่ม **"บันทึกสถานะทั้งหมด"**
- ระบบจะ:
  - ✅ บันทึกลงฐานข้อมูล
  - 📄 สร้างไฟล์ SQL Export อัตโนมัติ
  - 📊 อัปเดตสถิติ

---

### 💾 ส่วนที่ 5: จัดการข้อมูล

| ไฟล์ | ฟังก์ชัน | เมื่อไหร่ใช้ |
|------|----------|--------------|
| **save.php** | บันทึกข้อมูล | อัตโนมัติเมื่อกดบันทึก |
| **summary.php** | ดูสรุปผล | ดูภาพรวมที่ตรวจแล้ว |
| **clear_data.php** | ลบข้อมูล | ลบข้อมูลทั้งหมดของสาขา |
| **add.php** | เพิ่มสินค้าใหม่ | เพิ่มสินค้าที่ยังไม่มีในระบบ |

**⚠️ คำเตือน:**
- `clear_data.php` จะลบข้อมูลทั้งหมด ระวังใช้งาน!
- ระบบจะถามยืนยันก่อนลบเสมอ

---

### 📜 ส่วนที่ 6: ประวัติการทำงาน

**ไฟล์:** `history/history.php`

**ดูอะไรได้:**
- 📅 วันที่ตรวจสอบ
- ⏰ เวลาที่บันทึก
- 📍 สาขาที่ตรวจ
- 👤 ชื่อพนักงานผู้ตรวจ
- 📊 ผลการตรวจสอบ

**ฟีเจอร์:**
- กรองตามวันที่
- กรองตามสาขา
- ค้นหาด้วยชื่อพนักงาน
- Export เป็น Excel/CSV

---

### ⚙️ ส่วนที่ 7: ไฟล์ตั้งค่าและช่วยเหลือ

#### **config.php** - การตั้งค่าหลัก
```php
// เชื่อมต่อฐานข้อมูล 2 ฐาน:
- db_employee     → ข้อมูลพนักงาน
- db_sp_checklist → ข้อมูลเช็คลิสต์

// ฟังก์ชันที่ใช้บ่อย:
getChecklistConnection()   // เชื่อมต่อฐาน checklist
isValidLocation($name)     // เช็คว่าชื่อสาขาถูกต้องไหม
```

#### **includes/database_helper.php** - จัดการฐานข้อมูล
- เชื่อมต่อฐานข้อมูลแบบ Singleton (ประหยัดทรัพยากร)
- เชื่อมต่อใหม่อัตโนมัติถ้าหลุด
- รองรับภาษาไทย (utf8mb4)

#### **includes/header.php & footer.php**
- Template ส่วนบนและล่างของทุกหน้า
- โหลด CSS/JavaScript
- แสดงเมนูนำทาง

---

### 🗄️ ส่วนที่ 8: โครงสร้างฐานข้อมูล

#### **ฐานข้อมูลที่ 1: db_employee**
```sql
ตาราง: employees
├─ ID (รหัสอัตโนมัติ)
├─ employee_id (รหัสพนักงาน)
├─ fname (ชื่อ)
├─ lname (นามสกุล)
├─ email (อีเมล)
└─ Password (รหัสผ่านเข้ารหัส)
```

#### **ฐานข้อมูลที่ 2: db_sp_checklist**
```sql
ตาราง: เมืองสมุทรปราการ, พระประแดง, ... (6 ตาราง)
├─ id (รหัสสินค้า)
├─ product_code (รหัสบาร์โค้ด)
├─ product_name (ชื่อสินค้า)
├─ image_path (รูปภาพ)
├─ category (หมวดหมู่)
├─ status (สถานะ: มี/หมด/ไม่มีขาย)
├─ note (หมายเหตุ)
└─ updated_at (วันที่อัปเดต)
```

---

## 💻 ความต้องการของระบบ

| สิ่งที่ต้องมี | เวอร์ชันขั้นต่ำ | หมายเหตุ |
|---------------|-----------------|----------|
| **XAMPP** | 7.4+ | ติดตั้งจาก [apachefriends.org](https://www.apachefriends.org/) |
| **PHP** | 7.4+ | มากับ XAMPP |
| **MySQL** | 5.7+ | มากับ XAMPP |
| **Web Browser** | Chrome/Edge/Firefox | ใช้เวอร์ชันล่าสุด |

## 🚀 วิธีติดตั้ง (ง่ายมาก!)

### ขั้นตอนที่ 1: ติดตั้ง XAMPP
```
1. ดาวน์โหลด XAMPP → https://www.apachefriends.org/
2. ติดตั้งแบบปกติ
3. เปิด XAMPP Control Panel
4. กด Start ที่ Apache และ MySQL
```

### ขั้นตอนที่ 2: สร้างฐานข้อมูล
```
1. เปิดเว็บเบราว์เซอร์
2. พิมพ์ http://localhost/phpmyadmin
3. คลิก "New" เพื่อสร้างฐานข้อมูล 2 ฐาน:
   
   ฐานที่ 1: db_employee
   └─ Import ไฟล์: sql/db_employee.sql
   
   ฐานที่ 2: db_sp_checklist  
   └─ Import ไฟล์: sql/samutprakan_checklist.sql
```

**วิธี Import:**
- คลิกฐานข้อมูล → Import → Choose File → เลือกไฟล์ .sql → Go

### ขั้นตอนที่ 3: วางไฟล์
```
1. Copy โฟลเดอร์ employee_app_fixed
2. วางที่ c:\xampp\htdocs\
3. ผลลัพธ์: c:\xampp\htdocs\employee_app_fixed\
```

### ขั้นตอนที่ 4: ตั้งค่า (ถ้าจำเป็น)
เปิดไฟล์ `config.php` และตรวจสอบ:
```php
DB_HOST = 'localhost'  ✅ (ไม่ต้องแก้)
DB_USER = 'root'       ✅ (ไม่ต้องแก้)
DB_PASS = ''           ⚠️ (ถ้ามีรหัส MySQL ให้ใส่)
```

### ขั้นตอนที่ 5: ทดสอบ
```
1. เปิดเบราว์เซอร์
2. พิมพ์ http://localhost/employee_app_fixed/
3. ถ้าเห็นหน้า Login = สำเร็จ! 🎉
```

## 📱 วิธีใช้งาน (สำหรับพนักงาน)

### 🔐 ขั้นตอนที่ 1: ล็อกอิน
```
1. เปิด http://localhost/employee_app_fixed/
2. กรอก:
   - รหัสพนักงาน: (รหัสที่ได้รับจากบริษัท)
   - รหัสผ่าน: (รหัสผ่านส่วนตัว)
3. กดปุ่ม "เข้าสู่ระบบ"
```

### 🏢 ขั้นตอนที่ 2: เลือกสาขาที่จะตรวจ
```
1. คลิกที่การ์ดของสาขาที่ต้องการ (เช่น "เมืองสมุทรปราการ")
2. ระบบจะแสดงจำนวนสินค้าที่ต้องตรวจ
3. กดปุ่ม "เข้าสู่เช็คลิสต์"
```

### ✅ ขั้นตอนที่ 3: ตรวจสอบสินค้า
```
สำหรับแต่ละสินค้า:

1. เลือกสถานะ (เลือก 1 อัน):
   🟢 มี STOCK       → มีสินค้าในร้าน
   🔴 สินค้าหมด      → หมดแล้ว ต้องสั่งเพิ่ม
   ⚫ ไม่มีขาย       → สาขานี้ไม่ขายสินค้านี้

2. ใส่หมายเหตุ (บังคับต้องใส่!):
   ตัวอย่าง:
   - "มีครบ จำนวน 20 ชิ้น"
   - "หมดตั้งแต่เมื่อวาน ต้องสั่งด่วน"
   - "สาขานี้ไม่เคยขายสินค้านี้"

3. กดปุ่ม "บันทึกสถานะทั้งหมด"
```

### 📊 ขั้นตอนที่ 4: ดูผลลัพธ์
```
หลังบันทึกแล้ว สามารถ:
- ดูสรุปผล → สถิติสินค้ามี/หมด/ไม่มีขาย
- ดูประวัติ → ดูว่าตรวจเมื่อไหร่บ้าง
- Export → ส่งออกเป็นไฟล์ Excel
```

### 🔄 ฟีเจอร์เพิ่มเติม

| ฟังก์ชัน | ใช้เมื่อไร | วิธีใช้ |
|----------|------------|---------|
| **เคลียร์ข้อมูล** | ลบข้อมูลที่บันทึกผิด | กดปุ่ม "Clear Data" → ยืนยัน |
| **ดูสรุปผล** | ดูภาพรวมการตรวจสอบ | กดปุ่ม "Summary" |
| **ประวัติ** | ดูประวัติการทำงาน | คลิกเมนู "ประวัติการทำงาน" |
| **ออกจากระบบ** | เสร็จแล้วต้องการออก | กดปุ่ม "Logout" มุมขวาบน |

## 🔒 ความปลอดภัย

ระบบมีการป้องกัน:
- ✅ รหัสผ่านเข้ารหัสด้วย **bcrypt** (ไม่เก็บเป็นตัวอักษรธรรมดา)
- ✅ ป้องกัน **SQL Injection** ด้วย Prepared Statements
- ✅ ป้องกัน **XSS Attack** ด้วย htmlspecialchars
- ✅ ตรวจสอบ **Session** ทุกหน้า (ต้องล็อกอินก่อนใช้งาน)
- ✅ **Auto Logout** เมื่อปิดเบราว์เซอร์

## 💾 Backup และ Export

| ไฟล์/โฟลเดอร์ | ไว้ทำอะไร | ที่เก็บ |
|--------------|-----------|---------|
| **SQL Export** | สำรองข้อมูลที่บันทึก | `exports/` |
| **Log Files** | บันทึกการลบข้อมูล | `logs/` |
| **Photos** | รูปภาพที่อัปโหลด | `uploads/photos/` |

**💡 Tips:** สำรองไฟล์ในโฟลเดอร์ `exports/` ทุกสัปดาห์!

## 🔧 แก้ปัญหาที่พบบ่อย

### ❌ ปัญหา 1: ล็อกอินไม่ได้
```
อาการ: กรอกรหัสแล้วแต่เข้าไม่ได้

วิธีแก้:
✅ ตรวจสอบรหัสพนักงานและรหัสผ่านถูกต้อง
✅ ลองล็อกอินใน phpMyAdmin ดูว่ามีข้อมูลผู้ใช้หรือไม่
✅ ตรวจสอบว่า Apache และ MySQL เปิดอยู่
✅ ลอง Clear Cache เบราว์เซอร์
```

### ❌ ปัญหา 2: ฐานข้อมูลเชื่อมต่อไม่ได้
```
อาการ: เห็นข้อความ "Database connection failed"

วิธีแก้:
✅ เปิด XAMPP Control Panel
✅ ตรวจสอบ MySQL เป็นสีเขียว (Start แล้ว)
✅ ตรวจสอบ config.php:
   - DB_HOST = 'localhost'
   - DB_USER = 'root'
   - DB_PASS = '' (หรือรหัสที่ตั้งไว้)
✅ ทดสอบเปิด phpMyAdmin ดูว่าเข้าได้ไหม
```

### ❌ ปัญหา 3: บันทึกข้อมูลไม่ได้
```
อาการ: กดบันทึกแล้วไม่มีอะไรเกิดขึ้น

วิธีแก้:
✅ ต้องใส่หมายเหตุทุกรายการ (บังคับ!)
✅ ตรวจสอบว่าเลือกสถานะสินค้าแล้ว
✅ ลองบันทึกทีละ 10 รายการ (อย่าบันทึกพร้อมกันเยอะเกิน)
```

### ❌ ปัญหา 4: หน้าเว็บแสดงผลผิด
```
อาการ: CSS หาย หรือหน้าเว็บดูแปลกๆ

วิธีแก้:
✅ กด Ctrl + F5 (Hard Refresh)
✅ ลอง Clear Cache เบราว์เซอร์
✅ ตรวจสอบว่าโฟลเดอร์ assets/ มีไฟล์ CSS
```

### ❌ ปัญหา 5: ภาษาไทยแสดงเป็น "???"
```
อาการ: ตัวอักษรไทยแสดงเป็นเครื่องหมายแปลกๆ

วิธีแก้:
✅ ตรวจสอบฐานข้อมูลเป็น utf8mb4_unicode_ci
✅ Import ไฟล์ SQL ใหม่อีกครั้ง
✅ ลองรีสตาร์ท MySQL ใน XAMPP
```

## 🎯 แผนพัฒนาในอนาคต

- [ ] 📸 เพิ่มระบบถ่ายรูปสินค้าผ่านกล้อง
- [ ] 📧 ส่งอีเมลแจ้งเตือนเมื่อสินค้าหมด
- [ ] 📱 ทำเป็น Mobile App (Android/iOS)
- [ ] 🔔 แจ้งเตือนแบบ Real-time
- [ ] 📊 Dashboard แสดงกราฟสวยงามขึ้น
- [ ] 🌐 API สำหรับเชื่อมต่อระบบภายนอก

---

## 📞 ติดต่อและสนับสนุน
 - 📱 Tel.0640599267
### พบปัญหา?
- 🐛 สร้าง Issue ใน GitHub Repository
- 📧 ติดต่อฝ่าย IT ของบริษัท
- 📱 แจ้งผู้ดูแลระบบ

### ข้อมูลโปรเจกต์
- **Repository:** MAC
- **Owner:** Petchzz02
- **Version:** 1.0
- **Last Update:** พฤศจิกายน 2025

---

## ⭐ ขอบคุณที่ใช้งานระบบ MAC Employee Management System

**สร้างด้วย ❤️ โดยทีมพัฒนา MAC**

หากมีข้อเสนอแนะหรือพบปัญหา กรุณาติดต่อเรา เราพร้อมปรับปรุงระบบให้ดียิ่งขึ้น! 🚀